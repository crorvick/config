; ~/.emacs.d/init.el

(setq user-full-name "Chris Rorvick")

(setq inhibit-splash-screen t
      inhibit-startup-message t
      initial-scratch-message nil
      initial-major-mode 'org-mode)

(setq column-number-mode t)

(menu-bar-mode -1)
(tool-bar-mode -1)

(setq-default indicate-empty-lines t)

(setq make-backup-files nil)

(show-paren-mode t)

;;
;; org-mode
;;

(global-set-key (kbd "C-c a") 'org-agenda)
(global-set-key (kbd "C-c c") 'org-capture)
(global-set-key (kbd "C-c l") 'org-store-link)
(global-set-key (kbd "C-c b") 'org-iswitchb)

;;
;; cc-mode
;;

(defun my-recompile-or-compile ()
  "Call recompile if defined, otherwise compile"
  (interactive)
  (if (fboundp 'recompile)
      (call-interactively 'recompile)
    (call-interactively 'compile)))

(add-hook 'c-initialization-hook
	  '(lambda ()
	     (define-key c-mode-base-map (kbd "<f5>")    'my-recompile-or-compile)
	     (define-key c-mode-base-map (kbd "<S-f5>")  'compile)
	     (define-key c-mode-base-map (kbd "<f6>")    'gdb)))

(add-hook 'c-mode-common-hook
	  '(lambda ()
	     (c-toggle-auto-state 1)))

(setq compilation-scroll-output 'first-error
      compilation-auto-jump-to-first-error t)

;;
;; magit
;;

(global-set-key (kbd "C-x g") 'magit-status)

;;
;; add MELPA to package repositories
;;

(require 'package)
(add-to-list 'package-archives '("melpa" . "http://melpa.org/packages/") t)

;;
;; load site-specific config
;;

(let ((site-init (expand-file-name "~/.emacs.d/site-init.el")))
  (if (file-exists-p site-init)
      (load-file site-init)))
